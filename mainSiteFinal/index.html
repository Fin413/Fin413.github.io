<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Home</title>
        <meta charset="UTF-8">
        <!-- <link rel="icon" href="favicon.svg"> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
            :root{
                --cursorAnimation: blink 1s steps(2, start) infinite;
            }

            body, html{
                margin: 0;
                height: 100%;
                font-family: 'Courier New', Courier, monospace;
            }

            .notSelectable{
                user-select: none;
                -moz-user-select: none;
                -webkit-user-drag: none;
                -webkit-user-select: none;
                -ms-user-select: none;
            }

            #nameContainer{
                display: flex;
                width: 100%;
                height: 100%;
                margin-bottom: -5px; /* cuz otherwise the divider has a weird line */
                color: white;
                background: rgb(0,0,0);
                /* background: linear-gradient(0deg, rgba(0,0,0,1) 0%, rgb(27, 27, 27) 100%); */
                font-size: 65px;
                text-align: center;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                /* margin-left: 15px; conflicted about this (with or without) */        

            }            


            #name{
                cursor: pointer;
            }

            @media only screen and (max-width: 600px) {
                #name{
                    font-size: 20vw;
                }
            }

            #description{
                color: green;
                text-align: left;
                margin: -50px 50px 150px 50px;
                word-break: break-all;
            }

            #description::after{
                content: "_";
                animation: var(--cursorAnimation);
            }

            #scroll{
                position: absolute;
                left: 0;
                right: 0;
                bottom: -100px;
                opacity: 0;
                z-index: 100;
                margin: auto auto 0 0;
                text-align: center;
                filter: invert(100%);
                transition: bottom 1s, visibility 1s, opacity 1s;
            }

            #scroll, p {
                margin-bottom: -5px;
                font-size: 20px;
            }

            path{
                width: 1000%;
                transition: d 500ms;
                fill: black;
            }

            @keyframes blink {
                to{ visibility: hidden; }
            }

            @keyframes upDown {
                0%{bottom: 10px}
                50%{bottom: 0px;}
                100%{bottom: 10px}
            }

            


            /* Scrollbar styling */

            /* Scrollbar */
            ::-webkit-scrollbar {
                width: 12px;
            }

            /* Track */
            /* ::-webkit-scrollbar-track {
                background: white; 
            } */
            
            /* Handle */
            ::-webkit-scrollbar-thumb {
                background: black; 
            }

            /* Handle on hover */
            /* ::-webkit-scrollbar-thumb:hover {
                background: #555; 
            } */


                    
        </style>
    </head>
    <body onload="init()">
        <div id="nameContainer">
            <h1 id="name" class="notSelectable"></h1>
            <p id="description">C:\WINDOWS\system32\>&nbsp;</p>
            
           
        </div>
        
        <div id="scroll" class="notSelectable">
            <p>Scroll</p>
            <img src="arrow.png" width="30px">
        </div>

       

        <svg id="wave" style="transform:rotate(180deg); transition: 0.3s; opacity: 1" viewBox="0 0 1440 250" version="1.1" xmlns="http://www.w3.org/2000/svg">
            
            <path style="transform:translate(0, 0px); opacity:1" d="M0,0L288,150L576,150L864,125L1152,100L1440,125L1728,125L2016,50L2304,0L2592,100L2880,125L3168,150L3456,0L3744,150L4032,175L4320,225L4608,175L4896,150L5184,225L5472,225L5760,75L6048,125L6336,125L6624,25L6912,150L6912,250L6624,250L6336,250L6048,250L5760,250L5472,250L5184,250L4896,250L4608,250L4320,250L4032,250L3744,250L3456,250L3168,250L2880,250L2592,250L2304,250L2016,250L1728,250L1440,250L1152,250L864,250L576,250L288,250L0,250Z"></path>
            
            <path style="transform:translate(0, 50px); opacity:0.9" d="M0,175L288,175L576,50L864,150L1152,125L1440,0L1728,175L2016,150L2304,75L2592,100L2880,225L3168,175L3456,0L3744,0L4032,25L4320,75L4608,200L4896,25L5184,175L5472,175L5760,75L6048,125L6336,175L6624,125L6912,25L6912,250L6624,250L6336,250L6048,250L5760,250L5472,250L5184,250L4896,250L4608,250L4320,250L4032,250L3744,250L3456,250L3168,250L2880,250L2592,250L2304,250L2016,250L1728,250L1440,250L1152,250L864,250L576,250L288,250L0,250Z"></path>
            
            <path style="transform:translate(0, 100px); opacity:0.8" d="M0,200L288,175L576,125L864,175L1152,125L1440,0L1728,200L2016,175L2304,100L2592,225L2880,150L3168,150L3456,225L3744,0L4032,175L4320,50L4608,125L4896,125L5184,50L5472,150L5760,125L6048,100L6336,225L6624,200L6912,100L6912,250L6624,250L6336,250L6048,250L5760,250L5472,250L5184,250L4896,250L4608,250L4320,250L4032,250L3744,250L3456,250L3168,250L2880,250L2592,250L2304,250L2016,250L1728,250L1440,250L1152,250L864,250L576,250L288,250L0,250Z"></path>
            
            <path style="transform:translate(0, 150px); opacity:0.7" d="M0,225L288,225L576,100L864,125L1152,50L1440,175L1728,125L2016,150L2304,125L2592,225L2880,125L3168,200L3456,125L3744,225L4032,175L4320,175L4608,100L4896,225L5184,125L5472,125L5760,50L6048,0L6336,0L6624,175L6912,25L6912,250L6624,250L6336,250L6048,250L5760,250L5472,250L5184,250L4896,250L4608,250L4320,250L4032,250L3744,250L3456,250L3168,250L2880,250L2592,250L2304,250L2016,250L1728,250L1440,250L1152,250L864,250L576,250L288,250L0,250Z"></path>
        </svg>

        <h1>My projects</h1>
        <h1>Contact me</h1>
        <h1>idk a footer or smth</h1>

        <script>
            /*************************************************************************************\
             
                ISSUES
                    - innerText doesn't read spaces (if encouter issues this might be cause)

                SHIT LIST
                    - change little command line description based off of users system
                    - particle.js for background???
                    - add fish going acress the screen or smth idk
                    - dripping inc into letters
                    - add a go crazy button that ducks up all the text witht teh scramble thing

            \**************************************************************************************/



            function init(){
                setTimeout(()=>{
                    typeLoop = setInterval(typeLetter, 100);
                    scramble = setInterval(scrambleString, 50);
                }, 500);
            }

            var paths = document.querySelectorAll("path");
            let min = 25; // 0 is bottom
            let max = 200; // 250 is top
            let add = true;

            function animate(){
                requestAnimationFrame(animate);
               
                for(let i = 0; i < paths.length; i++){
                    let currentPathCoords = paths[i].getAttribute("d").split(/([A-z])/);

                    switch(i){
                        case 0:
                            min = 100;
                            max = 250;
                            break;
                        case 1:
                            min = 0;
                            max = 150;
                            break;
                        case 2:
                            min = -50;
                            max = 50;
                            break;
                        case 3:
                            min = -100;
                            max = 0;
                            break;
                    }

                    for(let j = 0; j < currentPathCoords.length; j++){
                        if(!isNaN(currentPathCoords[j][0])){
                            let coords = currentPathCoords[j].split(",");

                            // y range 0 (bottom) - 250 (top)

                            if(coords[1] == "250") continue;

                            let randNum = Math.floor(Math.random() * 10);
                            let coordInt = parseInt(coords[1]);

                            if((add && coordInt >= max || !add) && (coordInt >= min)) randNum *= -1;

                            coords[1] = coordInt + randNum;

                            currentPathCoords[j] = coords[0] + "," + coords[1];
                        }
                    }

                    paths[i].setAttribute("d", currentPathCoords.join(""));

                }


                add = !add;
            }

            animate();


            const element = document.getElementById("name");
            const root = document.querySelector(":root");

            const scrollIndicator = document.getElementById("scroll");

            var typeElement = element;

            var name = "Finlay Soehn.";
            var stringLength = 0;
            var scramble;
            var solve;
            var solvedLetters = [];

            var typeLoop;
            var typeString = name;
            var typeIndex = 0;

            if (window.addEventListener){
                window.addEventListener("mousewheel", scrollHandler, {passive: false}); // IE9+, Chrome, Safari, Opera
                window.addEventListener("DOMMouseScroll", scrollHandler); // Firefox
            }else{
                window.attachEvent("onmousewheel", scrollHandler); // IE 6/7/8
            }

            function scrollHandler() {
                let scrollPos = window.scrollY;

                // if(scrollPos > 150){
                //     scrollIndicator.style.animation = "none";
                //     setTimeout(()=>{
                //         scrollIndicator.style.bottom = "-100px";
                //         scrollIndicator.style.visibility = "hidden";
                //     }, 500);
                // }
                
                // for(let i = 1; i < infoBlocks.length; i++){
                //     let topOffset = infoBlocks[i].offsetTop;
                //     let halfHeight = infoBlocks[i].offsetHeight/2;

                //     if(scrollPos > (topOffset - window.innerHeight + halfHeight)) infoBlocks[i].style.opacity = 1;
                // }
            }

            function typeLetter(){
                // console.log(typeString[typeElement.textContent.length - 1])
                typeElement.innerHTML += typeString[typeIndex];
                typeIndex ++;

                if(typeElement == element) stringLength ++;
                
                if(typeIndex == typeString.length){ /// <- no neg 1???
                    typeIndex = 0;

                    if(typeString == "Part-time Programmer."){
                        clearInterval(typeLoop);
                        root.style.setProperty('--cursorAnimation', "blink 1s steps(2, start) infinite");
                        return;
                    }

                    setTimeout(()=>{
                        scrollIndicator.style.bottom = "10px";
                        scrollIndicator.style.opacity = 1;

                        typeString = "Part-time Programmer.";
                        root.style.setProperty('--cursorAnimation', "none");
                        typeLoop = setInterval(typeLetter, 100);
                        typeElement = document.getElementById("description");

                        setTimeout(()=>{
                            scrollIndicator.style.animation = "upDown 2s ease-in-out infinite";
                        }, 1000)
                    }, 1500);
                    
                    clearInterval(typeLoop);
                    unscramble();

                    element.onmouseover = () => {
                        stopScramble();
                        scramble = setInterval(scrambleString, 50);
                    }  
                    element.onmouseleave = unscramble;
                }
            }

            function stopScramble(){
                clearInterval(solve);
                clearInterval(scramble);
                solvedLetters = [];
            }

            function scrambleString(){
                const clearCharacters = "qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890~!@#$%^&*()`-_=+[]{}\\|:\;\"'?/>.<,";

                for(var i = 0; i < stringLength; i++){
                    
                    let temp = element.textContent;
                    
                    if(solvedLetters.includes(i) || temp[i] == " ") continue;

                    let random = Math.floor(Math.random() * (clearCharacters.length)); 
                    element.innerText = temp.substring(0, i) + clearCharacters[random] + temp.substring(i + 1);
                }
            }

            function unscramble(){        
                const solveFunc = () => {
                    if(solvedLetters.length == name.length){
                        stopScramble();
                        return;
                    }

                    let numLettersSolved = Math.floor(Math.random() * 3);
                    if((name.length - solvedLetters.length) == 1) numLettersSolved = 1;
                    
                    for(var i = 0; i < numLettersSolved; i++){
                        let charIndex = Math.floor(Math.random() * name.length);

                        while(solvedLetters.includes(charIndex)){ 
                            if(charIndex == name.length - 1) charIndex = 0;
                            else charIndex++;
                        }
                        
                        solvedLetters.push(charIndex);
                        
                        element.innerText = element.innerText.substring(0, charIndex) + name[charIndex] + element.innerText.substring(charIndex + 1);
                    }
                }
                solve = setInterval(solveFunc, 75);
            }

            


        </script>
    </body>
</html>