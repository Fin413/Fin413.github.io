var tutorialOverlay,actionBtns,sections,age,divisor,alienHunger,lastWorkout,alienSize,alienHeight,speed,spawnFood,blurTime,dataOnBlur,data=JSON.parse(window.localStorage.getItem("gameData")),workoutNotif=document.getElementById("workoutNotifContainer"),transitionEl=document.getElementById("transitionEl"),exerciseElement=document.getElementById("exercise"),canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d"),gameStart=!1,isTutorial=!1,transitioning=!1,dead=!1,grow=!0,paused=!1,filter=0,color=250,currentMoveSpeed=speed,selfSpeed=[!1,!1,!1,!1],selfPos=[500,100],foods=[],pointIndicators=[];resize(),window.onresize=resize,window.addEventListener("beforeunload",saveData);var character=new Image,globe=new Image,ship=new Image,happyMeter=new Image;character.src="media/1.svg",globe.src="media/earth.svg",ship.src="media/ship.svg",happyMeter.src="media/faceHappy.svg";var images=[character,globe,ship,happyMeter],imagesLoaded=0;function loaded(){images.forEach(e=>{e.complete?imageLoaded():e.onload=imageLoaded})}function imageLoaded(){++imagesLoaded==images.length&&(imagesLoaded+=10,readData())}function readData(){let e;switch(null==data&&initData(),alienHunger=data.hunger,divisor=data.divisor,color=data.color,age=calcAge(),color){case 110:e="#9BF4FB";break;case 300:e="#F8D6A6";break;case 250:e="#F5C8EB";break;default:e="#cef28f"}if(document.body.style.backgroundColor=e,document.documentElement.style.setProperty("--btnFilter",color+"deg"),alienHeight=canvas.width/divisor,speed=divisor/6,pageTransition(),calcChange(),setTimeout(()=>{setHunger(),setDial(),setCharacter()},2e3),null!=data.lastWorkout){lastWorkout=new Date(parseInt(data.lastWorkout,10));const[e,t,i]=[lastWorkout.toLocaleString("default",{month:"long"}),lastWorkout.getDate(),lastWorkout.getFullYear()],a=lastWorkout.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});document.getElementById("lastWorkout").innerHTML=`Welcome back! Your last workout was ${e} ${t}, ${i} at ${a}`,workoutNotif.style.bottom=0,workoutNotif.style.visibility="visible"}draw(),setInterval(()=>{alienHunger<10&&(alienHunger+=1/12),setHunger()},3e5),setInterval(()=>{increaseSize(1/24)},3e5)}function initData(){let e=window.location.search,t=parseInt(e.slice(e.lastIndexOf("=")+1),10),i=decodeURIComponent(e.slice(e.indexOf("=")+1,e.indexOf("&")));""!=i?(data={name:i,color:t,birthday:(new Date).getTime(),divisor:10.5,hunger:5,lastWorkout:null,lastVisit:(new Date).getTime()},window.localStorage.setItem("gameData",JSON.stringify(data)),toggleTutorialPrompt()):window.location.href="./home.html"}function saveData(){data.divisor=divisor,data.hunger=alienHunger,data.lastVisit=(new Date).getTime(),null!=lastWorkout&&(data.lastWorkout=lastWorkout.getTime()),window.localStorage.setItem("gameData",JSON.stringify(data))}function deleteAlien(){window.removeEventListener("beforeunload",saveData),window.localStorage.removeItem("gameData"),window.location.href="./home.html"}function calcAge(){let e=(new Date).getTime()-data.birthday,t=Math.round(e/(8.64*Math.pow(10,7))),i="days";return 1==t&&(i="day"),t+" "+i}function calcChange(){let e=(new Date).getTime()-data.lastVisit,t=Math.round(e/(3.6*Math.pow(10,6)));t/2>divisor-6?divisor=6:divisor-=t/2,t>10-alienHunger?alienHunger=10:alienHunger+=t,console.log("it's been "+t+" hours since your last visit."),console.log("You hunger went up by "+t),console.log("You weight went up by "+Math.round(t/2))}function hideNotif(){workoutNotif.style.bottom="-1000px",workoutNotif.style.visibility="hidden"}function pageTransition(e){transitionEl.style.visibility="visible",transitionEl.style.clipPath="circle(200% at 50% 50%)",setTimeout(()=>{transitionEl.style.clipPath="circle(0% at 50% 50%)",transitionEl.style.visibility="hidden",null!=e&&e()},1e3)}function resize(){alienHeight=alienSize,canvas.width=document.documentElement.clientWidth/1.5,canvas.height=canvas.width/1.5,canvas.height>=document.documentElement.clientHeight-100&&(canvas.height=document.documentElement.clientHeight-100,canvas.width=1.5*canvas.height)}var soundButton=document.getElementById("soundBtn"),mainAudio=document.getElementById("mainMusic"),gameAudio=document.getElementById("gameMusic"),currentMainSong=Math.floor(3*Math.random()),currentGameSong=Math.floor(3*Math.random());function nextSong(){gameStart?(gameAudio.autoplay=!0,currentGameSong<2?currentGameSong++:currentGameSong=0,gameAudio.src="media/music/game"+currentGameSong+".mp3"):(mainAudio.autoplay=!0,currentMainSong<2?currentMainSong++:currentMainSong=0,mainAudio.src="media/music/main"+currentMainSong+".mp3"),"paused"==soundButton.getAttribute("state")&&(gameAudio.pause(),mainAudio.pause())}function toggleSound(){"paused"==soundButton.getAttribute("state")?(gameStart?gameAudio.play():mainAudio.play(),soundButton.style.background="url('media/play.svg') -10px -9px / 70px no-repeat",soundButton.setAttribute("state","playing")):(gameStart?gameAudio.pause():mainAudio.pause(),soundButton.style.background="url('media/mute.svg') -10px -9px / 70px no-repeat",soundButton.setAttribute("state","paused"))}function transitionAudio(e,t){var i=setInterval(function(){e.volume=(e.volume-.1).toFixed(1),0==e.volume&&(clearInterval(i),e.pause(),e.volume=1,"playing"==soundButton.getAttribute("state")&&t.play())},150)}function toggleTutorialPrompt(){let e=document.getElementById("tutorialPrompt");"visible"==e.style.visibility?(e.style.visibility="hidden",e.style.right="-200px",document.body.style.marginRight=0):(e.style.visibility="visible",e.style.right=0,document.body.style.marginRight=e.clientWidth+"px")}function startTutorial(){document.getElementById("skipTutorial").style.display="block",hideNotif(),gameStart&&endGame(),"visible"==document.getElementById("settingsContainer").style.visibility&&toggleSettingsDrawer(),"visible"==exerciseElement.style.visibility&&(clearInterval(imgInterval),clearInterval(timerInterval),exerciseElement.style.visibility="hidden",exerciseElement.style.opacity=0),"0px"==window.getComputedStyle(document.getElementById("tutorialPrompt")).right&&toggleTutorialPrompt(),tutorialOverlay=document.getElementsByClassName("tutorialOverlay")[0],sections=document.getElementsByClassName("tutorialSection"),actionBtns=document.getElementsByClassName("actionBtn"),isTutorial=!0;let e=document.getElementsByClassName("name");for(let t=0;t<e.length;t++)e[t].innerText=data.name;tutorialOverlay.style.visibility="visible",sections[0].style.display="flex"}function endTutorial(){isTutorial=!1,gameStart&&endGame();for(let e=0;e<sections.length;e++)sections[e].style.display="none";tutorialOverlay.setAttribute("style","")}function nextSection(){for(let e=0;e<sections.length;e++)if("flex"==sections[e].style.display){if(sections[e].style.display="none",e==sections.length-1){endTutorial();break}let t=e+1;switch(t){case 1:tutorialOverlay.style.height="70%",tutorialOverlay.style.top="30%";break;case 2:tutorialOverlay.style.top="0";break;case 3:tutorialOverlay.style.top="30%";break;case 4:tutorialOverlay.style.height="100%",tutorialOverlay.style.top=0,showTutorialBtns(),sections[t].firstElementChild.style.position="absolute",sections[t].firstElementChild.style.top=actionBtns[0].getBoundingClientRect().top-100+"px",actionBtns[0].onclick=(()=>{nextSection(),showExercise()}),actionBtns[1].disabled=!0;break;case 5:tutorialOverlay.style.clipPath="none",tutorialOverlay.classList+=" tutorialOverlayAlt",tutorialOverlay.style.width="30%";break;case 6:actionBtns[0].onclick=showExercise,actionBtns[0].disabled=!0,actionBtns[1].disabled=!1,actionBtns[1].onclick=(()=>{startGame(),nextSection()}),tutorialOverlay.style.width="100%",showTutorialBtns(),sections[t].firstElementChild.style.position="absolute",sections[t].firstElementChild.style.top=actionBtns[0].getBoundingClientRect().top-100+"px";break;case 7:actionBtns[0].disabled=!1,actionBtns[1].onclick=startGame,tutorialOverlay.style.clipPath="none",tutorialOverlay.style.width="30%";break;case 8:spawnFood=setInterval(newFood,2e3);break;case 10:tutorialOverlay.style.right="100%",tutorialOverlay.style.transform="translateX(100%)",tutorialOverlay.style.width="68%",paused=!0;break;case 11:tutorialOverlay.style.right="0",tutorialOverlay.style.transform="",tutorialOverlay.style.width="100%",document.getElementById("skipTutorial").style.display="none"}sections[t].style.display="flex";break}}function showTutorialBtns(){let e=actionBtns[0].getBoundingClientRect().top-10+"px",t=actionBtns[0].getBoundingClientRect().bottom+10+"px";tutorialOverlay.style.clipPath="polygon(0 0, 0 20%, 0 50%, 100% 50%, 100% 80%, 100% 100%, 0 100%, 0 50%, 100% 50%, 100% 0)",setTimeout(()=>{tutorialOverlay.style.clipPath=`polygon(0 0, 0 20%, 0 ${t}, 100% ${t}, 100% 80%, 100% 100%, 0 100%, 0 ${e}, 100% ${e}, 100% 0)`},150)}function toggleSettingsDrawer(){if(isTutorial)return;let e=document.getElementById("settingsContainer");"visible"==e.style.visibility?(e.style.visibility="hidden",e.style.transform="translateX(-100%)"):(e.style.visibility="visible",e.style.transform="translateX(0)")}gameAudio.src="media/music/game"+currentGameSong+".mp3",mainAudio.src="media/music/main"+currentMainSong+".mp3",mainAudio.onended=gameAudio.onended=nextSong,soundButton.addEventListener("click",toggleSound),document.addEventListener("keydown",function(e){let t=e.key.toLowerCase();gameStart&&!dead&&("p"==t?paused=!0:"escape"==t?endGame():"e"==t&&showExercise(),"d"==t||"arrowright"==t?(selfSpeed[0]=!0,selfSpeed[1]=!1):"a"!=t&&"arrowleft"!=t||(selfSpeed[1]=!0,selfSpeed[0]=!1),"w"==t||"arrowup"==t?(e.preventDefault(),selfSpeed[2]=!0,selfSpeed[3]=!1):"s"!=t&&"arrowdown"!=t||(e.preventDefault(),selfSpeed[3]=!0,selfSpeed[2]=!1),currentMoveSpeed=selfSpeed[0]&&selfSpeed[2]||selfSpeed[0]&&selfSpeed[3]||selfSpeed[1]&&selfSpeed[2]||selfSpeed[1]&&selfSpeed[3]?speed/1.5:speed)}),document.addEventListener("keyup",function(e){if(!gameStart)return;let t=e.key.toLowerCase();"d"==t||"arrowright"==t?selfSpeed[0]=!1:"a"!=t&&"arrowleft"!=t||(selfSpeed[1]=!1),"w"==t||"arrowup"==t?selfSpeed[2]=!1:"s"!=t&&"arrowdown"!=t||(selfSpeed[3]=!1),currentMoveSpeed=selfSpeed[0]&&selfSpeed[2]||selfSpeed[0]&&selfSpeed[3]||selfSpeed[1]&&selfSpeed[2]||selfSpeed[1]&&selfSpeed[3]?speed/1.5:speed});var imgInterval,timerInterval,exerciseData={jumpingJacks:{name:"Jumping Jacks",count:10,time:15,link:"https://youtu.be/Q4QnlZs9PqI"},lunges:{name:"Lunges",count:8,time:20,link:"https://youtu.be/QOVaHwm-Q6U"},pushups:{name:"Push-Ups",count:5,time:15,link:"https://youtu.be/CCZGD55NxGo"},squats:{name:"Squats",count:5,time:15,link:"https://youtu.be/aclHkVaku9U"},highknees:{name:"High Knees or Run in Place",count:10,time:10,link:"https://youtu.be/D0GwAezTvtg"}},exerciseKeys=Object.keys(exerciseData),exerciseIndex=Math.floor(Math.random()*exerciseKeys.length),exerciseGraphic=document.getElementById("exerciseGraphic"),time=0,timerElement=document.getElementById("timer");function setTimer(e){timerElement.innerText=formatTime(e),timerInterval=setInterval(timer,1e3),time=e}function timer(){time--,timerElement.innerText=formatTime(time),0==time&&clearInterval(timerInterval)}function formatTime(e){let t=parseInt(e/60,10),i=parseInt(e%60,10);return t+":"+(i=i<10?"0"+i:i)}function showExercise(){if("visible"==exerciseElement.style.visibility)return;let e=exerciseData[exerciseKeys[exerciseIndex]];document.getElementById("exerciseTitle").innerText=e.count+" "+e.name,document.getElementById("howTo").innerHTML="Don't know how? Check out this video: <br> <a target='_blank' href='"+e.link+"'>"+e.link+"</a>",setTimer(e.time),exerciseGraphic.src="media/exercises/"+e.name+"1.svg",imgInterval=setInterval(()=>{exerciseGraphic.src="media/exercises/"+e.name+"2.svg",setTimeout(()=>{exerciseGraphic.src="media/exercises/"+e.name+"1.svg"},500)},1e3),exerciseElement.style.opacity=1,exerciseElement.style.visibility="visible",gameStart&&(paused=!0,foods=[])}function hideExercise(){if(0!=time||"hidden"==exerciseElement.style.visibility)return timerElement.style.color="red",timerElement.style.transform="scale(1.2)",void setTimeout(()=>{timerElement.style.color="black",timerElement.style.transform="scale(1)"},500);divisor<15&&increaseSize(-2),clearInterval(imgInterval),++exerciseIndex==exerciseKeys.length&&(exerciseIndex=0),gameStart&&draw(),lastWorkout=new Date,exerciseElement.style.visibility="hidden",exerciseElement.style.opacity=0,hideNotif(),isTutorial&&nextSection()}class food{constructor(e){let t;switch(this.pos,this.moveX,this.moveY,this.start=!1,this.isHealthy=!1,this.hitPlayer=!1,this.isOutOfBounds=!1,this.count=0,this.temp=[],this.warningPos=[],this.foodImg=new Image,this.foodSize=canvas.width/20,this.showWarning=!0,this.speed=e,0==Math.floor(3*Math.random())?(this.isHealthy=!0,this.foodImg.src="media/foods/healthy"+Math.floor(5*Math.random())+".svg"):this.foodImg.src="media/foods/unhealthy"+Math.floor(4*Math.random())+".svg",Math.floor(4*Math.random())){case 0:if(this.isHealthy){let e=Math.floor(Math.random()*canvas.width/10)+canvas.width/50,i=[];i=1==Math.floor(2*Math.random())?[-10,canvas.height]:[canvas.height+10,-10],this.pos=[e,i[0]],t=[e,i[1]]}else this.pos=[Math.floor(Math.random()*canvas.width),-10];break;case 1:if(this.isHealthy){let e=canvas.width-(Math.floor(Math.random()*canvas.width/10)+canvas.width/50),i=[];i=1==Math.floor(2*Math.random())?[-10,canvas.height]:[canvas.height+10,-10],this.pos=[e,i[0]],t=[e,i[1]]}else this.pos=[Math.floor(Math.random()*canvas.width),canvas.height+10];break;case 2:if(this.isHealthy){let e=[],i=Math.floor(Math.random()*canvas.height/10)+canvas.height/50;e=1==Math.floor(2*Math.random())?[-10,canvas.width]:[canvas.width+10,-10],this.pos=[e[0],i],t=[e[1],i]}else this.pos=[-10,Math.floor(Math.random()*canvas.height)];break;case 3:if(this.isHealthy){let e=[],i=canvas.height-(Math.floor(Math.random()*canvas.height/10)+canvas.height/50);e=1==Math.floor(2*Math.random())?[-10,canvas.width]:[canvas.width+10,-10],this.pos=[e[0],i],t=[e[1],i]}else this.pos=[canvas.width+10,Math.floor(Math.random()*canvas.height)]}setTimeout(()=>{this.isHealthy||(t=[selfPos[0]+alienSize/2-this.foodSize/2,selfPos[1]+alienSize/3-this.foodSize/2],this.speed+=2);let e=t[0]-this.pos[0],i=t[1]-this.pos[1],a=Math.sqrt(e*e+i*i);this.moveX=e/a*this.speed,this.moveY=i/a*this.speed,this.start=!0},2e3)}disp(){if(this.start)ctx.drawImage(this.foodImg,this.pos[0],this.pos[1],this.foodSize,this.foodSize),this.pos[0]+=this.moveX,this.pos[1]+=this.moveY;else{-10==this.pos[0]?(this.warningPos[0]=15,this.warningPos[1]=this.pos[1]):this.pos[0]==canvas.width+10?(this.warningPos[0]=canvas.width-15,this.warningPos[1]=this.pos[1]):-10==this.pos[1]?(this.warningPos[1]=30,this.warningPos[0]=this.pos[0]):this.pos[1]==canvas.height+10&&(this.warningPos[1]=canvas.height-10,this.warningPos[0]=this.pos[0]),this.isHealthy?ctx.fillStyle="green":ctx.fillStyle="red",ctx.strokeStyle="white",ctx.font=canvas.width/20+"px Arial",ctx.textAlign="center",this.count%20==0&&(this.showWarning=!this.showWarning),this.showWarning&&(ctx.fillText("!",this.warningPos[0],this.warningPos[1]),ctx.strokeText("!",this.warningPos[0],this.warningPos[1])),this.count++}let e=this.pos[0]<=selfPos[0]+alienSize&&this.pos[0]>=selfPos[0]-alienSize/3,t=this.pos[1]<=selfPos[1]+(alienSize-alienSize/3.5)&&this.pos[1]>=selfPos[1]-alienSize/3;this.pos[0]>canvas.width+15||this.pos[0]<-15||this.pos[1]>canvas.height+15||this.pos[1]<-15?this.isOutOfBounds=!0:e&&t&&(this.hitPlayer=!0)}}class pointIndicator{constructor(e){this.finished=!1,this.text=document.createElement("h1"),this.text.id="pointIndicator",e?(this.text.innerText="+1",this.text.style.color="green"):(this.text.innerText="- Speed",this.text.style.color="red");let t=Math.round(selfPos[0]/canvas.width*100),i=Math.round(selfPos[1]/canvas.height*100);this.text.style.left=t+"%",this.text.style.top=i+"%",document.getElementById("canvasContainer").appendChild(this.text),setTimeout(()=>{this.text.style.opacity=1,this.text.style.top=i-i/2+"%"},100),setTimeout(()=>{this.text.style.opacity=0},600),setTimeout(()=>{this.finished=!0;for(let e=0;e<pointIndicators.length;e++)pointIndicators[e].finished&&(pointIndicators[e].text.remove(),pointIndicators.splice(e,1))},1e3)}}function shakeScreen(){let e=document.getElementById("canvasContainer");e.style.animation="shake 150ms ease-in-out 3",setTimeout(()=>{e.style.animation="none",e.offsetHeight,e.style.animation=null},500)}function newFood(){paused||foods.push(new food(3))}function draw(){paused?0==time&&(document.getElementById("pauseOverlay").style.display="flex"):window.requestAnimationFrame(draw),ctx.clearRect(0,0,canvas.width,canvas.height),alienSize=canvas.width/divisor,gameStart?game():mainScreen()}function addSpacing(e){return e.split("").join(String.fromCharCode(8202)+String.fromCharCode(8202))}function unpause(){paused=!1,document.getElementById("pauseOverlay").style.display="none",draw()}function mainScreen(){ctx.fillStyle="black",ctx.strokeStyle="black",ctx.drawImage(globe,canvas.width/2-canvas.width/2/2,canvas.height/2-canvas.width/2/35,canvas.width/2,canvas.width/2),ctx.filter="hue-rotate("+color+"deg) brightness("+filter+"%)",ctx.drawImage(character,canvas.width/2-alienSize/2,canvas.height/2-alienHeight/1.5,alienSize,alienHeight),ctx.filter="hue-rotate(0deg) brightness(100%)",characterAnimation(),ctx.textAlign="center",ctx.font=canvas.height/12+"px alien",ctx.fillText(addSpacing("Galactic Gainz"),canvas.width/2,canvas.height/12),ctx.font=canvas.height/20+"px alien",ctx.fillText(addSpacing(data.name),canvas.width/2,canvas.height/8),ctx.fillText(addSpacing(age+" old"),canvas.width/2,canvas.height/5),ctx.textAlign="left",ctx.fillText(addSpacing("Alien Weight"),canvas.width/1.27,canvas.height/5.5),ctx.fillText(addSpacing("Alien Hunger:"),canvas.width/30,canvas.height-canvas.height/8),ctx.textAlign="center",ctx.fillText(addSpacing("Happiness"),canvas.width/12,canvas.height/20),ctx.drawImage(happyMeter,canvas.width/31,canvas.height/25,canvas.width/10,canvas.width/10)}function toggleGamePanel(){let e=document.getElementById("gamePanel");"none"===window.getComputedStyle(e).display?(e.style.display="block",setTimeout(()=>{e.style.marginLeft=0,e.style.opacity=1},100)):(e.style.marginLeft="-225px",e.style.opacity=0,setTimeout(()=>{e.style.display="none"},1e3))}function startGame(){transitioning||(transitioning=!0,transitionAudio(mainAudio,gameAudio),toggleGamePanel(),increaseSize(0),selfSpeed=[!1,!1,!1,!1],divisor<=6&&(document.getElementById("lastWorkout").innerText="Uh oh! Your alien is at max size, so their ship can't take off. Workout so you can take flight!",workoutNotif.style.backgroundColor="red",workoutNotif.style.visibility="visible",workoutNotif.style.bottom=0,setTimeout(()=>{endGame()},1500)),pageTransition(()=>{gameStart=!0,canvas.style.background="url('media/space.jpg')",selfPos=[canvas.width/2-alienSize/2,canvas.height/2-alienSize/2],isTutorial||(spawnFood=setInterval(newFood,2e3)),document.getElementById("actionBtnsContainer").style.display="none",document.getElementById("dialContainer").style.display="none",document.getElementById("hungerContainer").style.display="none",setDial(),setHunger(),transitioning=!1}))}function endGame(){transitioning||isTutorial||(transitioning=!0,transitionAudio(gameAudio,mainAudio),toggleGamePanel(),pageTransition(()=>{canvas.style.background="linear-gradient(0deg, rgba(34,193,195,1) 0%, rgba(253,187,45,1) 100%)",paused&&(paused=!1,document.getElementById("pauseOverlay").style.display="none",draw()),clearInterval(spawnFood),foods=[],gameStart=!1,document.getElementById("actionBtnsContainer").style.display="flex",document.getElementById("dialContainer").style.display="flex",document.getElementById("hungerContainer").style.display="flex",setHunger(),setDial(),transitioning=!1}))}function game(){selfSpeed[0]&&checkBounds("right")&&(selfPos[0]+=currentMoveSpeed),selfSpeed[1]&&checkBounds("left")&&(selfPos[0]-=currentMoveSpeed),selfSpeed[2]&&checkBounds("up")&&(selfPos[1]-=currentMoveSpeed),selfSpeed[3]&&checkBounds("down")&&(selfPos[1]+=currentMoveSpeed),ctx.shadowColor="white",dead?ctx.filter="grayscale(100%)":ctx.shadowBlur=Math.floor(40*Math.random())+30,ctx.drawImage(ship,selfPos[0],selfPos[1],alienSize,alienSize),ctx.shadowBlur=0;for(let e=0;e<foods.length;e++)foods[e].disp(),1==foods[e].isOutOfBounds?foods.splice(e,1):1==foods[e].hitPlayer&&(foods[e].isHealthy?(alienHunger>0&&alienHunger--,setHunger(),pointIndicators.push(new pointIndicator(!0))):(increaseSize(1),pointIndicators.push(new pointIndicator(!1)),shakeScreen()),foods.splice(e,1))}function checkBounds(e){switch(e){case"up":if(selfPos[1]<=-alienSize/2)return!1;break;case"down":if(selfPos[1]>=canvas.height-alienSize/2)return!1;break;case"left":if(selfPos[0]<=-alienSize/2)return!1;break;case"right":if(selfPos[0]>=canvas.width-alienSize/2)return!1}return!0}function increaseSize(e){if(divisor-e>15?divisor=15:0!=e&&(divisor-=e),divisor>=6&&(speed=divisor/6),document.getElementById("speedDisp").innerText="Speed "+Math.round((divisor-6)/9*100)+"%",divisor<=6){if(divisor=6,gameStart&&!isTutorial){dead=!0,selfSpeed=[!1,!1,!1,!1];let e=document.createElement("img");e.src="media/explosion.gif",e.id="explosion",e.style.top=Math.round(selfPos[1]/canvas.height*100)+"%",e.style.left=Math.round(selfPos[0]/canvas.width*100)+"%",document.getElementById("canvasContainer").appendChild(e),foods=[],clearInterval(spawnFood),setTimeout(()=>{endGame(),e.remove(),e=void 0},1500)}}else dead=!1;setDial(),setCharacter()}function setDial(){let e;e=gameStart?document.getElementById("dialIndicatorSide"):document.getElementById("dialIndicator");let t=180*((9-(divisor-6))/9)-90;e.style.transform="rotate("+t+"deg)  translateX(-50%)",calculateHappiness()}function setCharacter(){let e=0;var t=setInterval(()=>{filter=100==filter?0:100,5==e?character.src=divisor<=8?"media/4.svg":divisor<=10?"media/3.svg":divisor<=12?"media/2.svg":"media/1.svg":10==e&&(clearInterval(t),filter=100),e++},200)}function calculateHappiness(){let e=((divisor-6)/9+(10-alienHunger)/10)/2*100;happyMeter.src=e>=0&&e<=35?"media/faceSad.svg":e>35&&e<=70?"media/faceNeutral.svg":"media/faceHappy.svg"}function setHunger(){let e=document.getElementsByClassName("hungerBar");e=gameStart?e[1]:e=e[0];let t=(10-alienHunger)/10*100,i=pickHex(t/100);e.style.backgroundColor="rgb("+i[0]+","+i[1]+", 0",0==t&&(t=1),e.style.clipPath="polygon(0 0, "+t+"% 0, "+t+"% 101%, 0 101%)",calculateHappiness()}function pickHex(e){var t=[0,255,0],i=[255,0,0],a=e,n=1-a;return[Math.round(t[0]*a+i[0]*n),Math.round(t[1]*a+i[1]*n)]}function characterAnimation(){grow?alienHeight+=.2:alienHeight-=.2;let e=alienHeight-alienSize;(e>10||e<-10)&&(alienHeight=alienSize),e>=5?grow=!1:e<=-5&&(grow=!0)}window.onblur=(()=>{gameStart&&(paused=!0),blurTime=(new Date).getTime(),dataOnBlur=data}),window.onfocus=(()=>{let e=(new Date).getTime()-blurTime;if(e>3e5){let t=dataOnBlur.hunger+10/12*(e/3e5),i=dataOnBlur.divisor+1/24*(e/3e5);alienHunger<=t+10/12&&alienHunger>=t-10/12&&(console.log("set interval hunger is off"),console.log(e/6e4+" mins have passed"),console.log("hunger went up "+(alienHunger-dataOnBlur.hunger)),console.log("It should have gone up by "+(t-dataOnBlur.hunger)),alienHunger+=t-dataOnBlur.hunger,setHunger()),divisor<=i+1/12&&divisor>=i-1/12&&(console.log("set interval weight is off"),console.log(e/6e4+" mins have passed"),console.log("divisor went up "+(divisor-dataOnBlur.divisor)),console.log("It should have gone up by "+(i-dataOnBlur.divisor)),increaseSize(i-dataOnBlur.divisor))}});